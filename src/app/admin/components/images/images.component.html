<visa-admin-header></visa-admin-header>


<div class="admin-container">
    <div class="admin-container--main">
        <clr-datagrid #datagridRef id="datagrid" [clrDgLoading]="loading">
            <clr-dg-column>Image ID</clr-dg-column>
            <clr-dg-column>Name</clr-dg-column>
            <clr-dg-column>Version</clr-dg-column>
            <clr-dg-column>Description</clr-dg-column>
            <clr-dg-column>Cloud Image</clr-dg-column>
            <clr-dg-column>Icon</clr-dg-column>
            <clr-dg-column>Protocols</clr-dg-column>
            <clr-dg-column>Visible</clr-dg-column>
            <clr-dg-column>Actions</clr-dg-column>

            <clr-dg-row *ngFor="let image of images;let i = index">
                <clr-dg-cell>{{image.id}}</clr-dg-cell>
                <clr-dg-cell>{{image.name}}</clr-dg-cell>
                <clr-dg-cell>{{image.version}}</clr-dg-cell>
                <clr-dg-cell>{{image.description}}</clr-dg-cell>
                <clr-dg-cell>{{imageCloudImageName[i]}}</clr-dg-cell>
                <clr-dg-cell>{{image.icon}}</clr-dg-cell>
                <clr-dg-cell>
                    <div class="protocol" *ngFor="let protocol of image.protocols">
                        {{protocol.name}}
                    </div>
                </clr-dg-cell>
                <clr-dg-cell><input [checked]="image.visible" disabled type="checkbox"/></clr-dg-cell>
                <clr-dg-cell>
                    <button (click)="onUpdate(image)" class="btn btn-sm">Update</button>
                    <button (click)="onDelete(image.id)" class="btn btn-warning-outline btn-sm">Delete</button>
                </clr-dg-cell>
            </clr-dg-row>
            <clr-dg-footer>
                <button class="btn btn-sm" type="button" (click)="onCreate()">New</button>
                <button class="btn btn-sm" type="button" (click)="onRefresh()"><clr-icon shape="refresh"></clr-icon></button>
                <clr-dg-pagination #pagination [clrDgPageSize]="pageSize" [clrDgPage]="pageInfo?.currentPage"
                                   [clrDgLastPage]="pageInfo?.totalPages">{{pagination.firstItem + 1}}
                    - {{pagination.lastItem + 1 < pageInfo?.count ? pagination.lastItem + 1 : pageInfo?.count}}
                    of {{ pageInfo?.count }} images
                </clr-dg-pagination>
            </clr-dg-footer>
        </clr-datagrid>
    </div>
</div>
